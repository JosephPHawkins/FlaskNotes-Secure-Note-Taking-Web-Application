{% extends 'base.html' %} 

{% block title %}Home{% endblock %}

{% block content %}

<h1 style="text-align: center;">Notes</h1>


<ul class="list-group mt-3">
    {% for note in notes %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>{{ note.data }}</span>
            <div>
                <span class="text-muted me-2">{{ note.date.strftime('%Y-%m-%d %H:%M') }}</span>
                <button class="btn btn-sm btn-danger" onclick="deleteNote({{ note.id }})">&times;</button>
            </div>
        </li>
    {% else %}
        <li class="list-group-item">No notes available.</li>
    {% endfor %}
</ul>

<form method="POST">
    <textarea class="form-control" id="note" name="note" rows="5" placeholder="Write your note here..."></textarea>
    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Save Note</button>
    </div>
</form>

<script>
function deleteNote(noteId) {
    fetch('/delete-note', {
        method: 'POST',
        body: JSON.stringify({ noteId: noteId }),
        headers: { 'Content-Type': 'application/json' }
    }).then((_res) => {
        window.location.href = "/";
    });
}
</script>

{% endblock %}
